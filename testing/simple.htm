<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Darcey@AllForTheCode.co.uk - AFTC.Preload.js Development Tests</title>
    <style>
        html,
        body {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 1rem;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            margin: 5px;
            padding: 0;
        }

        .box {
            padding: 5px;
            border: 1px solid #000000;
            margin: 20px 0;
        }

        #out {}
    </style>
    <script src="../dist/aftc.preload.min.js"></script>
    <script>
        var preloader, percentage, imageDump;

        function onCompleteHandler() {
            log("onCompleteHandler()");
            percentage.innerHTML = "Preloader has completed!";

            // Example of how to load a preloaded image
            var img1 = preloader.getItemById("img1");
            img1.width = 100;
            img1.height = 100;
            log("img1 = " + img1);
            dump.appendChild(img1);

            // Example of retrieving JSON data from the preloader
            var data1 = JSON.parse(preloader.getItemById("json1"));
            log(data1.list[0]);
            log("data1.list[0].item = " + data1.list[0].item);

            // Example of retrieving text data from the preloader
            var txt1 = preloader.getItemById("txt1");
            log(txt1);
            log("txt1 = \"" + txt1 + "\"");

            // Example of retrieving an svg from the preloader
            var svg1 = preloader.getItemById("svg1");
            var svg1Container = document.createElement("div");
            svg1Container.style.width = "150px";
            svg1Container.style.height = "150px";
            svg1Container.innerHTML = svg1;
            dump.appendChild(svg1Container);
        }



        function onProgressHandler(e) {
            percentage.innerHTML = e.percentLoaded + "%<br>Currently loading: " + e.url;
        }

        onReady(function () {
            logTo("out"); // set log to output to a html element also
            log("AFTC.PRELOAD.JS"); // log to console and html element set above

            // Var defs
            percentage = document.getElementById("percentage");
            imageDump = document.getElementById("dump");

            preloader = new AFTC.Preloader({
                batchSize: 3,
                onProgress: onProgressHandler,
                onComplete: onCompleteHandler
            });

            preloader
                .add({ id: "img1", url: "img/img01.jpg", cache: false })
                .add({ id: "img2", url: "img/img02.jpg" })
                .add({ id: "img3", url: "img/img03.jpg" })
                //
                .add({ id: "svg1", url: "svg/trace_1.svg", cache: false })
                //
                .add({ id: "css1", url: "generated/styles1.css", cache: false })
                .add({ id: "css2", url: "generated/styles2.css" })
                .add({ id: "css3", url: "generated/styles3.css" })
                //
                .add({ id: "js1", url: "generated/javascript1.js", cache: false })
                .add({ id: "js2", url: "generated/javascript2.js" })
                .add({ id: "js3", url: "generated/javascript3.js" })
                //
                .add({ id: "json1", url: "generated/data1.json" })
                .add({ id: "json2", url: "generated/data2.json" })
                .add({ id: "json3", url: "generated/data3.json" })
                //
                .add({ id: "txt1", url: "test.txt" });

            for(var i=0; i<preloader.params.que.length; i++){
                log("Adding [" + preloader.params.que[i].url + "] for preload!");
            }
            log("- - STARTING PRELOADER -- ")
            preloader.start();
        });
    </script>

</head>

<body>
    <h3>AFTC.Preload.js Development Tests</h3>
    <h5>Darcey@aftc.io</h5>
    <hr>
    <h2 id="percentage"></h2>
    <div id="dump" class="box"></div>
    <div id="out" class="box"></div>
</body>

</html>