function log(e){console&&console.log(e)}var AFTC=AFTC||{};AFTC.Preloader=function(){function e(){i.noOfFilesLoaded=0,i.noOfJSFiles=0,i.noOfCSSFiles=0;for(var e=0;e<i.que.length;e++){var n=i.que[e];"javascript"==n.type&&i.noOfJSFiles++,"css"==n.type&&i.noOfCSSFiles++}o()}function n(){for(var e=0;e<i.que.length;e++){var n=i.que[e];if(!n.preloading&&!n.preloaded)if(i.noOfJSFilePreloaded<i.noOfJSFiles){if("javascript"==n.type)return n.preloading=!0,n.index=e,n}else if("javascript"!=n.type)return n.preloading=!0,n.index=e,n}return null}function o(){if(i.error)return a(),!1;var e,o=!0;if(i.noOfJSFilePreloaded<i.noOfJSFiles)r(e=n());else{for(l=0;l<i.batchSize;l++)null!=i.batch[l]&&0;for(var l=0;l<i.batchSize;l++)null==i.batch[l]&&null!=(e=n())&&(e.batchIndex=l,i.batch[l]=e,r(e)),null!=i.batch[l]&&(o=!1);o&&t()}}function r(e){e.url.split(".").pop();$.ajax({url:e.url,success:function(){if("javascript"==e.type){var n=document.createElement("script");n.onload=function(){e.preloading=!1,e.preloaded=!0,i.noOfJSFilePreloaded++,i.noOfFilesLoaded++,d(e),o()},n.src=e.url,document.head.appendChild(n)}else if("css"==e.type){var r=document.getElementsByTagName("head")[0],l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.href=e.url,l.media="all",l.onload=function(){e.preloading=!1,e.preloaded=!0,i.noOfCSSFilesPreloaded++,i.batch[e.batchIndex]=null,i.noOfFilesLoaded++,d(e),o()},r.appendChild(l)}else e.preloading=!1,e.preloaded=!0,i.batch[e.batchIndex]=null,i.noOfFilesLoaded++,d(e),o()},error:function(n,o,r){var l="# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #\n";l+="AFTC.preload(): ERROR: PRELOADER STOPPED! \n",l+="Error on ["+e.url+"]\n",l+="Error ["+o+"]\n",l+="Error ["+r+"]\n",l+="# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #",console.error(l),i.error=!0}})}function l(e,n){if("array"!=typeof e){var o=e.split(".").pop();$.ajax({url:e,success:function(){if("js"==o){var r=document.createElement("script");r.onload=function(){(n||void 0!=n)&&n()},r.src=e,document.head.appendChild(r)}else if("css"==o){var l=document.getElementsByTagName("head")[0],t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=queItem.url,t.media="all",t.onload=function(){(n||void 0!=n)&&n()},l.appendChild(t)}else(n||void 0!=n)&&n()},error:function(n,o,r){var l="# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #\n";l+="AFTC.preload.loadNow(): !ERROR! \n",l+="Error on ["+e+"]\n",l+="Error ["+o+"]\n",l+="Error ["+r+"]\n",l+="# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #",console.error(l),i.error=!0}})}else for(var r=0;r<e.length;r++)(r=e.length-1)?l(e[r],n):l(e[r],null)}function t(){i.onComplete&&i.onComplete()}function a(){i.onError&&i.onError()}function d(e){i.percentLoaded=100/i.que.length*i.noOfFilesLoaded*100,i.percentLoaded=Math.round(i.percentLoaded)/100,i.onProgress&&i.onProgress(i.percentLoaded)}var i={que:[],noOfJSFiles:0,noOfJSFilePreloaded:0,noOfCSSFiles:0,noOfCSSFilesPreloaded:0,error:!1,batchSize:4,batch:[],percentLoaded:0,noOfFilesLoaded:0,onComplete:null,onProgress:null,onError:null};if(arguments[0]&&"object"==typeof arguments[0])for(var c in arguments[0])arguments[0].hasOwnProperty(c)&&(i[c]=arguments[0][c]);return{add:function(){var e={id:null,url:"",type:null,preloading:!1,preloaded:!1,index:-1,batchIndex:-1};if(arguments[0]&&"object"==typeof arguments[0])for(var n in arguments[0])arguments[0].hasOwnProperty(n)&&(e[n]=arguments[0][n]);i.que.push(e)},start:function(){e()},noOfFilesLoaded:function(){return i.noOfFilesLoaded},percent:function(){return i.percentLoaded},debug:function(){log(""),log("AFTC Preloader:"),log(i),log("")},loadNow:function(e,n){l(e,n)}}};